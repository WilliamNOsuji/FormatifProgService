<div class="container">
  <div class="channels">
    <h3>Salons textuels üí¨</h3>

    <!-- Liste des canaux de discussion -->
    <div *ngFor="let c of channelList" (click)="selectChannel(c)" [class]="selectedChannel && selectedChannel.id == c.id ? 'selectedChannel' : 'notSelectedChannel'"># {{c.name}}</div>
    <hr>

    <!-- Formulaire PRESQUE COMPLET pour cr√©er un nouveau Channel -->
    <div id="newChannel">
      <input type="text" name="newChannelName" id="newChannelName" placeholder="Nom du nouveau channel" [(ngModel)]="newChannelName"><button (click)="postChannel()">Nouveau canal</button>
    </div>
    
  </div>
  
  <div class="messages">

    <!-- Nom du canal s√©lectionn√© -->
    <div class="channelTitle">{{selectedChannel != null ? '# ' + selectedChannel.name : 'S√©lectionnez un salon... üß†'}}</div>
    <div class="messageList">
      
      <!-- Boucle qui affiche les messages -->
      <div class="singleMessage" *ngFor="let m of messageList">

        <div class="avatar">
          <img src="assets/images/avatar.png" alt="Avatar">
        </div>

        <div class="messageArea">

          <div class="close" (click)="deleteMessage(m.id)">‚ùå</div>

          <div class="date">{{m.sentAt | date:"yyyy-MM-dd hh:mm:ss"}}</div>

          <!-- Auteur du message -->
          <div class="nickname">{{m.userName}}</div>

          <!-- Texte du message -->
          <div class="text">{{m.text}}</div>

          <div class="reactions">

            <!-- Afifchage des r√©actions par message -->
            <div class="singleReaction" *ngFor="let r of m.reactions">
              <img [src]="'https://localhost:7004/api/Reactions/GetReactionPicture/' + r.id" alt="Reaction" (click)="toggleReaction(r.id, m)">
              <div>{{r.quantity}}</div>
            </div>
            <div class="singleReaction" (click)="selectMessage(true, m)">
              ‚ûï
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Formulaire pour poster un nouveau message dans le canal s√©lectionn√© -->
    <div class="newMessage">
      <div>
        <textarea [(ngModel)]="messageTextInput" placeholder="√âcrivez un message dans # g√©n√©ral | üì¢ ..."></textarea>
      </div>
      <div>
        <button><img src="assets/images/envoyer.png" alt="Envoyer" (click)="postMessage()"></button>
      </div>
      
    </div>
  </div>
  
</div>

<!-- Formulaire pour ajouter une r√©action √† un message -->


<div class="newReactionOverlay" *ngIf="reactionOverlayOn">
  <div class="close" (click)="selectMessage(false, null)">
    ‚ùå
  </div>
  <div class="newReaction">
    <input type="file" #newReactionFile><button (click)="postReaction()">R√©agir</button>
  </div>
</div>
